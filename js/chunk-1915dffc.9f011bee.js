(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1915dffc"],{"0745":function(e,a,t){e.exports=t.p+"img/estado_vacio.2893b194.svg"},"0d86":function(e,a,t){"use strict";var r=t("5530"),o=t("1da1"),n=(t("96cf"),t("d3b7"),t("e9c4"),t("20aa")),i=t("0dcc"),s=function(e){var a=n["a"].BASE_URL+"/clientes-internet/email/"+e;return i["a"].get(a)},l=function(e){var a=n["a"].BASE_URL+"/datos-fiscales/datosfiscales/"+e;return i["a"].get(a)},c=function(e){var a=n["a"].BASE_URL+"/clientes-internet";return i["a"].post(a,e)},u=function(e){var a=n["a"].BASE_URL+"/clientes-internet";return i["a"].put(a,e)},d=function(e){return new Promise(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(t,o){var s,l,c,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,s=n["a"].BASE_URL+"/clientes-internet/email/"+e.email,a.next=4,i["a"].get(s);case 4:l=a.sent,t(l),a.next=26;break;case 8:if(a.prev=8,a.t0=a["catch"](0),c=JSON.parse(JSON.stringify(a.t0)),404!==c.status){a.next=25;break}return a.prev=12,u=n["a"].BASE_URL+"/clientes-internet",a.next=16,i["a"].post(u,Object(r["a"])(Object(r["a"])({},e),{},{idCliente:1,cliente:{id:1}}));case 16:d=a.sent,t(d),a.next=23;break;case 20:a.prev=20,a.t1=a["catch"](12),o(a.t1);case 23:a.next=26;break;case 25:o(a.t0);case 26:case"end":return a.stop()}}),a,null,[[0,8],[12,20]])})));return function(e,t){return a.apply(this,arguments)}}())},m=function(e){var a=n["a"].BASE_URL+"/clientes-internet/hijos";return i["a"].post(a,e)},f=function(e){console.log("data :",e);var a=n["a"].BASE_URL+"/datos-fiscales/getPdfData";return i["a"].multipart(a,e)},p=function(e){console.log("saveTaxData data :",e);var a=n["a"].BASE_URL+"/datos-fiscales/saveTaxData";return i["a"].post(a,e)};a["a"]={getByEmail:s,createClienteInternet:c,updateClienteInternet:u,searchClienteInternet:d,createHijo:m,getDataDatosFiscales:l,getPdfData:f,saveTaxData:p}},"19b8":function(e,a,t){},2179:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("wrapper",{attrs:{titulo:"Alumnos"}},[e.$usuario.hijos&&e.$usuario.hijos.length>0?r("v-row",[e._l(e.$usuario.hijos,(function(a,t){return r("v-col",{key:t,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("alumno",{attrs:{alumno:a.alumno,"mostrar-acciones":"","loading-desasignar":a.cargandoSaldo,"bloquea-productos":""},on:{bloquearProductos:function(t){return e.abrirBloqueo(a)},"editar-alumno":function(t){return e.abrirDialogOperarAlumno(a)},"desasignar-alumno":function(t){return e.abrirDialogDesasignarAlumno(a)}}})],1)})),r("v-btn",{attrs:{fixed:"",color:"primary",bottom:"",right:"",fab:""},on:{click:function(a){e.dialogBuscarAlumno=!0}}},[r("v-icon",[e._v("mdi-plus")])],1)],2):r("v-row",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{align:"center",justify:"center"}},[r("v-col",{staticClass:"text-center",staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{cols:"12"}},[r("img",{style:e.$vuetify.breakpoint.smAndDown?"width:100%":"width:50%",attrs:{src:t("61dd")}})]),r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("h2",{staticClass:"text--disabled",staticStyle:{"font-family":"Nunito"}},[e._v("Aún no tiene alumnos agregados")])]),r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("v-btn",{attrs:{rounded:""},on:{click:function(a){e.dialogBuscarAlumno=!0}}},[r("span",{staticClass:"primary--text",staticStyle:{"font-family":"Nunito"}},[e._v("Agregar alumno")])])],1)],1),r("dialogo",{attrs:{title:"Asignar cafetería default"},model:{value:e.dialogCafeteriaDefault,callback:function(a){e.dialogCafeteriaDefault=a},expression:"dialogCafeteriaDefault"}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("cafeteria")],1)],1)],1),r("dialogo",{attrs:{title:e.alumnoParaBloquearProducto.alumno?"Bloquear productos para "+e.alumnoParaBloquearProducto.alumno.nombre:""},model:{value:e.dialogBloquearProductos,callback:function(a){e.dialogBloquearProductos=a},expression:"dialogBloquearProductos"}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("carrusel",e._l(e.categorias,(function(a,t){return r("carrusel-item",{key:t,attrs:{size:"60%"}},[r("categoria",{attrs:{categoria:a,"esta-seleccionada":e.categoriaSeleccionada&&a.id===e.categoriaSeleccionada},on:{seleccionarCategoria:function(t){return e.seleccionarCategoria(a)}}})],1)})),1)],1),e._l(e.productosFiltrados,(function(a,t){return r("v-col",{key:t,attrs:{cols:"12",md:"6"}},[r("producto",{attrs:{"opcion-bloquear":"",producto:a,"mostrar-acciones":"","productos-bloqueados-alumno":e.alumnoParaBloquearProducto.alumno?e.alumnoParaBloquearProducto.alumno.productosBloqueados:[]},on:{"bloquear-producto":function(t){return e.bloquearProducto(a)},"desbloquear-producto":function(t){return e.desbloquearProducto(a)}}})],1)}))],2)],1),r("dialogo",{attrs:{title:"Buscar alumno"},model:{value:e.dialogBuscarAlumno,callback:function(a){e.dialogBuscarAlumno=a},expression:"dialogBuscarAlumno"}},[e.alumnosDisponibles.length<=0?[r("v-form",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.resetFormNombre,expression:"resetFormNombre"}],ref:"formNombre",attrs:{"lazy-validation":""},model:{value:e.formNombre,callback:function(a){e.formNombre=a},expression:"formNombre"}},[r("v-row",[r("v-col",{staticClass:"mt-3",attrs:{cols:"12"}},[r("h3",{staticClass:"text--disabled text-center"},[e._v("Buscar por nombre")]),r("v-text-field",{attrs:{label:"Nombre",rules:e.nameRules,autofocus:""},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.buscarAlumnoPorNombre.apply(null,arguments)}},model:{value:e.nombre,callback:function(a){e.nombre=a},expression:"nombre"}}),r("v-text-field",{attrs:{label:"Apellido Paterno",rules:e.nameRules},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.buscarAlumnoPorNombre.apply(null,arguments)}},model:{value:e.apellidoPaterno,callback:function(a){e.apellidoPaterno=a},expression:"apellidoPaterno"}}),r("v-text-field",{attrs:{label:"Apellido Materno",rules:e.nameRules},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.buscarAlumnoPorNombre.apply(null,arguments)}},model:{value:e.apellidoMaterno,callback:function(a){e.apellidoMaterno=a},expression:"apellidoMaterno"}})],1),r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("v-btn",{attrs:{disabled:!e.nombre||!e.apellidoPaterno||!e.apellidoMaterno,rounded:"",color:"primary"},on:{click:e.buscarAlumnoPorNombre}},[e._v("Buscar")])],1)],1)],1),r("v-row",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.resetFormMatricula,expression:"resetFormMatricula"}]},[r("v-col",{staticClass:"mt-5",attrs:{cols:"12"}},[r("h3",{staticClass:"text--disabled text-center"},[e._v("Buscar por matrícula")]),r("v-text-field",{ref:"matricula",attrs:{label:"Matrícula",rules:e.nameRules},on:{keyup:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.matricula&&e.buscarAlumnoPorMatricula()}},model:{value:e.matricula,callback:function(a){e.matricula=a},expression:"matricula"}})],1),r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("v-btn",{attrs:{rounded:"",color:"primary",disabled:!e.matricula},on:{click:e.buscarAlumnoPorMatricula}},[e._v("Buscar")])],1)],1)]:r("v-row",e._l(e.alumnosDisponibles,(function(a,t){return r("v-col",{key:t,attrs:{cols:"12",md:"6"}},[r("alumno",{attrs:{alumno:a,seleccionar:"","mostrar-acciones":"","alumno-agregado":e.estaAlumnoSeleccionado(a)},on:{seleccionar:function(t){return e.seleccionarAlumno(a)}}})],1)})),1)],2),r("dialogo",{attrs:{title:"Modificar "+e.alumnoParaOperar.nombre},model:{value:e.dialogOperarAlumno,callback:function(a){e.dialogOperarAlumno=a},expression:"dialogOperarAlumno"}},[e.alumnoParaOperar.nombre?r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"Nombre"},model:{value:e.alumnoParaOperar.nombre,callback:function(a){e.$set(e.alumnoParaOperar,"nombre",a)},expression:"alumnoParaOperar.nombre"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"Apellido Paterno"},model:{value:e.alumnoParaOperar.apellidoPaterno,callback:function(a){e.$set(e.alumnoParaOperar,"apellidoPaterno",a)},expression:"alumnoParaOperar.apellidoPaterno"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"Apellido Materno"},model:{value:e.alumnoParaOperar.apellidoMaterno,callback:function(a){e.$set(e.alumnoParaOperar,"apellidoMaterno",a)},expression:"alumnoParaOperar.apellidoMaterno"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"Matrícula",disabled:""},model:{value:e.alumnoParaOperar.matricula,callback:function(a){e.$set(e.alumnoParaOperar,"matricula",a)},expression:"alumnoParaOperar.matricula"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-text-field",{attrs:{label:"Grado",disabled:""},model:{value:e.alumnoParaOperar.grado,callback:function(a){e.$set(e.alumnoParaOperar,"grado",a)},expression:"alumnoParaOperar.grado"}})],1),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-select",{attrs:{value:e.alumnoParaOperar.seccion.titulo,items:[e.alumnoParaOperar.seccion.titulo],label:"Sección",disabled:""}})],1),r("v-col",{attrs:{cols:"12"}},[r("h3",[e._v("Selecciona un icono para "+e._s(e.alumnoParaOperar.nombre))])]),e._l(e.imagenes,(function(a,t){return r("v-col",{key:t,attrs:{cols:"6",md:"3"}},[r("v-card",{staticClass:"text-center v-btn",staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{flat:""},on:{click:function(t){return e.seleccionarImagen(a.src)}}},[r("v-img",{attrs:{src:"https://images-hapit-lunch.s3.amazonaws.com/icons/"+a.src,width:"70"}})],1)],1)}))],2):e._e(),r("template",{slot:"actions"},[r("v-btn",{attrs:{text:"",color:"primary",plain:""},on:{click:e.modificarAlumno}},[e._v("Guardar")])],1)],2),r("dialogo",{attrs:{title:e.dialogDesasignarAlumno?"¿Desea desasignar a "+e.alumnoParaDesasignar.alumno.nombre+" "+e.alumnoParaDesasignar.alumno.apellidoPaterno+"?":""},model:{value:e.dialogDesasignarAlumno,callback:function(a){e.dialogDesasignarAlumno=a},expression:"dialogDesasignarAlumno"}},[r("template",{slot:"actions"},[r("v-btn",{attrs:{text:"",color:"primary",plain:""},on:{click:e.desasignarAlumno}},[e._v("Aceptar")])],1)],2)],1)},o=[],n=t("b85c"),i=t("1da1"),s=(t("96cf"),t("d3b7"),t("c740"),t("e9c4"),t("4de4"),t("8b83")),l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-card",{staticClass:"text-center",staticStyle:{"border-radius":"20px"}},[t("v-card-text",{staticClass:"text-center flex-column",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[t("v-img",{attrs:{height:"100px",width:"100px",src:"https://cdn.pixabay.com/photo/2019/08/27/04/18/store-icon-4433328_960_720.png"}})],1),t("v-card-text",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("h3",[e._v("Cafeteria 1")])])],1)],1),t("v-card-actions",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"#8bc34a"}},[t("v-btn",{attrs:{text:"",dark:""}},[e._v("Asignar")])],1)],1)},c=[],u={name:"Cafeteria"},d=u,m=t("2877"),f=t("6544"),p=t.n(f),g=t("8336"),v=t("b0af"),b=t("99d9"),x=t("62ad"),h=t("adda"),y=t("0fd9"),A=Object(m["a"])(d,l,c,!1,null,"5c02cf67",null),_=A.exports;p()(A,{VBtn:g["a"],VCard:v["a"],VCardActions:b["a"],VCardText:b["c"],VCol:x["a"],VImg:h["a"],VRow:y["a"]});var P=t("34a0"),k=t("dd26"),C=t("0d86"),S=t("20aa"),B=t("8eab"),w=t("4bdc"),$=t("cc46"),R=t("e822"),q=t("22a8"),O=t("e637"),E=t("c26f"),N={name:"Alumnos",components:{Alumno:q["a"],Categoria:R["a"],CarruselItem:$["a"],Carrusel:w["a"],Cafeteria:_,Producto:s["a"]},data:function(){return{alumnoParaOperar:{base64:""},dialogBuscarAlumno:!1,dialogBloquearProductos:!1,dialogOperarAlumno:!1,buscarPorNombre:!1,buscarPorMatricula:!1,buscarPorQr:!1,bloquearProductos:!0,categorias:[{nombre:"Bebidas",img:"https://images.vexels.com/media/users/3/127674/isolated/preview/9fd717285f202af5437fd453cbe2e172-vaso-plano-de-bebidas.png"},{nombre:"Dulces",img:"https://cdn-icons-png.flaticon.com/512/194/194394.png"},{nombre:"Frituras",img:"https://creazilla-store.fra1.digitaloceanspaces.com/emojis/52747/french-fries-emoji-clipart-md.png"}],dialogCafeteriaDefault:!1,nombre:null,apellidoPaterno:null,apellidoMaterno:null,matricula:null,alumnosDisponibles:[],productos:[],alumnoParaBloquearProducto:{},dialogDesasignarAlumno:!1,nameRules:[function(e){return!!e||"Este campo es requerido"}],alumnoParaDesasignar:{},categoriaSeleccionada:null,productosFiltrados:[],formNombre:!1,imagenes:[{src:"automovil.png"},{src:"balon.png"},{src:"casco.png"},{src:"corona.png"},{src:"gato.png"},{src:"leon.png"},{src:"mandala.png"},{src:"mariposa.png"},{src:"ni%C3%B1o.png"},{src:"ni%C3%B1a.png"}]}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$loader=!0,a.prev=1,a.next=4,P["a"].getCategorias();case 4:e.categorias=a.sent,a.next=9;break;case 7:a.prev=7,a.t0=a["catch"](1);case 9:return e.$loader=!1,a.prev=10,a.next=13,B["a"].getProductos();case 13:e.productos=a.sent,a.next=19;break;case 16:a.prev=16,a.t1=a["catch"](10),e.productos=[];case 19:return a.prev=19,a.next=22,E["a"].getOrdenesPorClienteAndEstatus(e.$usuario.id,"CREADA");case 22:e.ordenes=a.sent,a.next=28;break;case 25:a.prev=25,a.t2=a["catch"](19),e.ordenes=[];case 28:t=e,r=Object(n["a"])(e.$usuario.hijos);try{for(i=function(){var e=o.value;t.$set(e,"cargandoSaldo",!0),O["a"].getSaldoPorCafeteria(t.$usuario.idCliente,e.alumno.id).then((function(a){t.$set(e.alumno.cafeteria,"saldoAlumno",t.$getSaldoDeAlumnoParaCafeteria(e.alumno.cafeteria.id,a))})).catch((function(){})).finally((function(){return t.$set(e,"cargandoSaldo",!1)}))},r.s();!(o=r.n()).done;)i()}catch(s){r.e(s)}finally{r.f()}e.categoriaSeleccionada||(e.productosFiltrados=e.productos);case 32:case"end":return a.stop()}}),a,null,[[1,7],[10,16],[19,25]])})))()},watch:{dialogBuscarAlumno:function(e){if(e){var a=this;this.$nextTick((function(){return a.$refs.formNombre.reset()})),this.matricula=null,this.alumnosDisponibles=[]}}},methods:{abrirBloqueo:function(e){this.alumnoParaBloquearProducto=e,this.dialogBloquearProductos=!0},seleccionarImagen:function(e){this.$set(this.alumnoParaOperar,"refImagen","https://images-hapit-lunch.s3.amazonaws.com/icons/"+e)},modificarAlumno:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$loader=!0,a.prev=1,a.next=4,k["a"].updateAlumno(e.alumnoParaOperar);case 4:t=a.sent,r=e.$usuario.hijos.findIndex((function(e){return e.alumno.id===t.id})),e.$set(e.$usuario.hijos[r],"alumno",t),localStorage.setItem(S["a"].CURRENT_USER_KEY,JSON.stringify(e.$usuario)),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](1),e.$showAlerta("600","red","mdi-alert-circle","No fue posible modificar.",!0);case 13:e.$loader=!1,e.dialogOperarAlumno=!1;case 15:case"end":return a.stop()}}),a,null,[[1,10]])})))()},abrirDialogOperarAlumno:function(e){this.alumnoParaOperar=JSON.parse(JSON.stringify(e.alumno)),this.dialogOperarAlumno=!0},estaAlumnoSeleccionado:function(e){return this.$usuario.hijos.some((function(a){return a.idAlumno===e.id}))},buscarAlumnoPorNombre:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.$refs.formNombre.validate()){a.next=12;break}return e.$loader=!0,a.prev=2,a.next=5,k["a"].busquedaPorNombre(e.nombre,e.apellidoPaterno,e.apellidoMaterno);case 5:e.alumnosDisponibles=a.sent,a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](2),e.$showAlerta("600","error","mdi-alert-circle","No se encontrarón alumnos.",!0);case 11:e.$loader=!1;case 12:case"end":return a.stop()}}),a,null,[[2,8]])})))()},buscarAlumnoPorMatricula:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$loader=!0,a.prev=1,a.next=4,k["a"].busquedaPorMatricula(e.matricula);case 4:a.t0=a.sent,e.alumnosDisponibles=[a.t0],a.next=11;break;case 8:a.prev=8,a.t1=a["catch"](1),e.$showAlerta("600","error","mdi-alert-circle","No se encontrarón alumnos.",!0);case 11:e.$loader=!1;case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},seleccionarAlumno:function(e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.$loader=!0,t.prev=1,r={id:0,idClienteInternet:a.$usuario.id,idAlumno:e.id,alumno:e},t.next=5,C["a"].createHijo(r);case 5:o=t.sent,a.$usuario.hijos.push(o),localStorage.setItem(S["a"].CURRENT_USER_KEY,JSON.stringify(a.$usuario)),a.dialogBuscarAlumno=!1,a.$showAlerta("600","success","mdi-check-circle-outline","Alumno asignado.",!0),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),a.$showAlerta("600","error","mdi-alert-circle","No se pudo asignar alumno, inténtelo más tarde.",!0);case 15:a.$loader=!1,a.dialogBuscarAlumno=!1;case 17:case"end":return t.stop()}}),t,null,[[1,12]])})))()},bloquearProducto:function(e){if(j(this.ordenes,e))this.$showAlerta("600","warning","mdi-alert-circle","No es posible bloquear este producto porque se encuentra en una orden creada.",!1);else{var a={id:0,producto:e,idAlumno:this.alumnoParaBloquearProducto.alumno.id},t=this;t.$loader=!0,B["a"].bloquearProducto(a).then((function(e){t.alumnoParaBloquearProducto.alumno.productosBloqueados.push(e),localStorage.setItem(S["a"].CURRENT_USER_KEY,JSON.stringify(t.$usuario))})).catch((function(e){t.$showAlerta("600","error","mdi-alert-circle","No se pudo bloquear el producto, inténtelo más tarde.",!0)})).finally((function(){return t.$loader=!1}))}},desbloquearProducto:function(e){var a=this,t=a.alumnoParaBloquearProducto.alumno.productosBloqueados.findIndex((function(a){return e.id===a.producto.id})),r=a.alumnoParaBloquearProducto.alumno.productosBloqueados[t];a.$loader=!0,B["a"].desbloquearProducto(r.id).then((function(){a.$delete(a.alumnoParaBloquearProducto.alumno.productosBloqueados,t),localStorage.setItem(S["a"].CURRENT_USER_KEY,JSON.stringify(a.$usuario))})).catch((function(e){a.$showAlerta("600","error","mdi-alert-circle","No se pudo desbloquear el producto, inténtelo más tarde.",!0)})).finally((function(){return a.$loader=!1}))},abrirDialogDesasignarAlumno:function(e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.alumno.cafeterias){t.next=9;break}return a.$loader=!0,t.t0=a,t.t1=e.alumno,t.next=7,O["a"].getSaldoPorCafeteria(a.$usuario.idCliente,e.alumno.id);case 7:t.t2=t.sent,t.t0.$set.call(t.t0,t.t1,"cafeterias",t.t2);case 9:r=e.alumno.cafeterias.some((function(e){return e.saldoAlumno})),r?a.$showAlerta("600","warning","mdi-alert-circle","No es posible desasignar el alumno si tiene saldo.",!1):(a.alumnoParaDesasignar=e,a.dialogDesasignarAlumno=!0),t.next=16;break;case 13:t.prev=13,t.t3=t["catch"](0),a.$showAlerta("600","warning","mdi-alert-circle","No es posible desasignar el alumno si tiene saldo.",!1);case 16:a.$loader=!1;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},desasignarAlumno:function(){var e=this;e.$loader=!0;var a=e.$usuario.hijos.findIndex((function(a){return e.alumnoParaDesasignar.id===a.id}));k["a"].desasignarAlumno(e.alumnoParaDesasignar.id).then((function(){e.$delete(e.$usuario.hijos,a),localStorage.setItem(S["a"].CURRENT_USER_KEY,JSON.stringify(e.$usuario)),e.$showAlerta("600","success","mdi-check-circle-outline","Alumno desasignado correctamente.",!0)})).catch((function(a){e.$showAlerta("600","error","mdi-alert-circle","No fue posible desasignar alumno.",!0),console.log(a)})).finally((function(){e.dialogDesasignarAlumno=!1,e.$loader=!1}))},seleccionarCategoria:function(e){var a=this;a.categoriaSeleccionada=e.id,a.categoriaSeleccionada?a.productosFiltrados=a.productos.filter((function(e){var t=e.categoria.id;return t==a.categoriaSeleccionada})):a.productosFiltrados=a.productos},resetFormNombre:function(){this.$refs.formNombre.resetValidation()},resetFormMatricula:function(){this.$refs.matricula.resetValidation()}}};function j(e,a){return e.some((function(e){return e.productos.some((function(e){return e.producto.id===a.id}))}))}var D=N,U=t("4bd4"),V=t("132d"),I=t("b974"),L=t("8654"),M=t("269a"),F=t.n(M),T=t("a293"),J=Object(m["a"])(D,r,o,!1,null,"365bde89",null);a["default"]=J.exports;p()(J,{VBtn:g["a"],VCard:v["a"],VCol:x["a"],VForm:U["a"],VIcon:V["a"],VImg:h["a"],VRow:y["a"],VSelect:I["a"],VTextField:L["a"]}),F()(J,{ClickOutside:T["a"]})},"22a8":function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("v-card",{staticClass:"my-4",staticStyle:{"border-radius":"40px"},attrs:{color:"#eaf1f6",to:e.redireccionar?{name:"Alumnos"}:""}},[e.bloqueaProductos?r("v-card-title",{staticClass:"pa-2 text-center",staticStyle:{"background-color":"#EF5350",display:"flex","margin-left":"85%","border-bottom-left-radius":"inherit"}},[r("v-btn",{attrs:{icon:"",loading:e.loadingDesasignar,small:"",dark:""},on:{click:function(a){return e.$emit("desasignar-alumno",e.alumno)}}},[r("v-icon",[e._v("mdi-close-thick")])],1)],1):e._e(),r("v-card",{staticClass:"text-center d-flex flex-column justify-space-between align-center pa-4",attrs:{color:"transparent",flat:""}},[r("v-avatar",{attrs:{size:"180px"}},[e.alumno.refImagen?r("v-img",{attrs:{src:e.alumno.refImagen,size:"180px"}}):r("v-img",{attrs:{src:t("71f5"),size:"180px"}})],1)],1),r("v-card-title",{staticClass:"text-center",staticStyle:{"word-break":"normal!important",display:"grid"}},[r("v-btn",{attrs:{text:"",large:""},on:{click:function(a){e.bloqueaProductos&&e.$emit("editar-alumno",e.alumno)}}},[e._v(e._s(e.alumno.nombreCompleto))])],1),r("v-card-text",{staticClass:"mb-2 ma-4 mx-3"},[r("v-row",{staticClass:"ma-2"},[r("v-col",{staticClass:"pb-0 pt-0",attrs:{cols:"12"}},[r("span",[e._v(e._s(e.alumno.matricula))])]),r("v-col",{staticClass:"pb-0 pt-0",attrs:{cols:"12"}},[r("span",[e._v(e._s(e.alumno.grado))])]),e.alumno.seccion?r("v-col",{staticClass:"pb-0 pt-0",attrs:{cols:"12"}},[r("span",[e._v(e._s(e.alumno.seccion.titulo))])]):e._e(),e.agregaSaldo?r("v-col",{staticClass:"pb-0 pt-0",attrs:{cols:"12"}},[r("span",{staticClass:"font-weight-bold primary--text"},[e._v(e._s(e._f("moneda")(e.alumno.saldo)))])]):e._e(),e.bloqueaProductos?r("v-col",{staticClass:"pb-0 pt-0",attrs:{cols:"12"}},[e.alumno.cafeteria?r("span",[e._v(e._s(e.alumno.cafeteria.nombre)),r("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(a){e.dialogoAsignarCafeteria=!0}}},[r("v-icon",[e._v("mdi-lead-pencil")])],1)],1):r("span",[e._v("Sin cafetería default "),r("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(a){e.dialogoAsignarCafeteria=!0}}},[r("v-icon",[e._v("mdi-lead-pencil")])],1)],1)]):e._e()],1)],1),e.alumnoAgregado?r("v-card-actions",{staticClass:"font-weight-bold white--text",staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"#1867c0"}},[r("h4",[e._v("Alumno Agregado")])]):e.mostrarAcciones?r("v-card-actions",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"#8bc34a"}},[e.bloqueaProductos?r("v-btn",{attrs:{text:"",dark:""},on:{click:function(a){return e.$emit("bloquearProductos")}}},[e._v("Bloquear productos")]):e._e(),e.agregaSaldo?r("v-btn",{attrs:{text:"","x-small":"",dark:""},on:{click:function(a){return e.$emit("agregarSaldo")}}},[e._v("Agregar saldo")]):e._e(),e.muestraHistorial?r("v-btn",{attrs:{text:"","x-small":"",dark:""},on:{click:function(a){return e.$emit("verHistorial")}}},[e._v("Ver historial")]):e._e(),e.seleccionar?r("v-btn",{attrs:{text:"","x-small":"",dark:""},on:{click:function(a){return e.$emit("seleccionar")}}},[e._v("Seleccionar")]):e._e()],1):e._e()],1),r("dialogo",{attrs:{title:"Asignar cafeteria"},model:{value:e.dialogoAsignarCafeteria,callback:function(a){e.dialogoAsignarCafeteria=a},expression:"dialogoAsignarCafeteria"}},[r("v-row",e._l(e.cafeterias,(function(a,t){return r("v-col",{key:t,attrs:{cols:"12",md:"6"}},[r("v-card",{staticStyle:{"border-radius":"10px"}},[r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("h3",{staticClass:"primary--text"},[e._v(e._s(a.nombre))]),r("h4",[e._v(e._s(a.email))]),r("h4",[e._v(e._s(a.telefono))])])],1)],1),r("v-card-actions",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"#8bc34a"}},[r("v-btn",{attrs:{text:"",small:"",dark:""},on:{click:function(t){return e.seleccionarCafeteria(a)}}},[e._v("Seleccionar")])],1)],1)],1)})),1)],1)],1)},o=[],n=t("1da1"),i=(t("e9c4"),t("96cf"),t("34a0"),t("dd26")),s=t("e637"),l=t("20aa"),c={name:"Alumno",components:{},props:{alumno:{type:Object,required:!0},bloqueaProductos:{type:Boolean,default:!1},agregaSaldo:{type:Boolean,default:!1},muestraHistorial:{type:Boolean,default:!1},seleccionar:{type:Boolean,default:!1},mostrarAcciones:{type:Boolean,default:!1},redireccionar:{type:Boolean,required:!1},loadingDesasignar:{type:Boolean,required:!1},alumnoAgregado:{type:Boolean,required:!1}},data:function(){return{dialogoAsignarCafeteria:!1,cafeterias:[]}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$loader=!0,a.prev=1,a.next=4,s["a"].getCafeterias(e.$usuario.idCliente);case 4:e.cafeterias=a.sent,a.next=9;break;case 7:a.prev=7,a.t0=a["catch"](1);case 9:e.$loader=!1;case 10:case"end":return a.stop()}}),a,null,[[1,7]])})))()},methods:{seleccionarCafeteria:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.$loader=!0,t.prev=1,a.$set(a.alumno,"cafeteria",e),t.next=5,i["a"].updateAlumno(a.alumno);case 5:return t.sent,t.next=8,s["a"].getConSaldoAlumno(e.id,a.alumno.id);case 8:r=t.sent,a.$set(a.alumno.cafeteria,"saldoAlumno",r.saldoAlumno),localStorage.setItem(l["a"].CURRENT_USER_KEY,JSON.stringify(a.$usuario)),a.dialogoAsignarCafeteria=!1,t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](1),a.$showAlerta("600","error","mdi-alert-circle","No fue posible asignar cafeteria.",!0),a.$router.go();case 18:a.$loader=!1;case 19:case"end":return t.stop()}}),t,null,[[1,14]])})))()}}},u=c,d=t("2877"),m=t("6544"),f=t.n(m),p=t("8212"),g=t("8336"),v=t("b0af"),b=t("99d9"),x=t("62ad"),h=t("132d"),y=t("adda"),A=t("0fd9"),_=Object(d["a"])(u,r,o,!1,null,"22a7ace2",null);a["a"]=_.exports;f()(_,{VAvatar:p["a"],VBtn:g["a"],VCard:v["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:x["a"],VIcon:h["a"],VImg:y["a"],VRow:A["a"]})},"269a":function(e,a){e.exports=function(e,a){var t="function"===typeof e.exports?e.exports.extendOptions:e.options;for(var r in"function"===typeof e.exports&&(t.directives=e.exports.options.directives),t.directives=t.directives||{},a)t.directives[r]=t.directives[r]||a[r]}},"34a0":function(e,a,t){"use strict";var r=t("20aa"),o=t("0dcc"),n=function(){var e=r["a"].BASE_URL+"/categorias-productos";return o["a"].get(e)};a["a"]={getCategorias:n}},5246:function(e,a,t){},"613a":function(e,a,t){"use strict";t("19b8")},"61dd":function(e,a,t){e.exports=t.p+"img/niños_estado_vacio.570dd6e2.svg"},"8b83":function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("v-card",{staticStyle:{"border-radius":"40px"},attrs:{color:"#eaf1f6",flat:"",disabled:e.estaBloqueado&&!e.opcionBloquear}},[e.editarProducto?r("v-card-title",{staticClass:"pa-2 text-center",staticStyle:{"background-color":"gray",display:"flex","margin-left":"85%","border-bottom-left-radius":"inherit"}},[r("v-btn",{attrs:{icon:"","x-small":"",dark:""},on:{click:function(a){return e.editarProducto()}}},[r("v-icon",[e._v("mdi-pencil")])],1)],1):e._e(),r("v-row",[r("v-col",{staticClass:"text-center flex-column pr-0",staticStyle:{display:"flex"},attrs:{cols:"4"}},[r("div",{staticClass:"py-2 flex-column text-center alineacion"},[r("v-img",{attrs:{height:"100px",width:"100px",src:e.imgSrc,"lazy-src":t("0745")}})],1)]),r("v-col",{staticClass:"pl-0 ml-0",attrs:{cols:"8"}},[r("v-card-text",{staticClass:"pa-0"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("h3",{staticClass:"black--text",staticStyle:{"font-family":"Nunito"}},[e._v(e._s(e.producto.nombre))]),r("h4",{staticClass:"text--disabled",staticStyle:{"font-family":"Readex Pro, sans-serif"}},[e._v(e._s(e.producto.descripcion))]),r("h4",{staticClass:"text--disabled",staticStyle:{"font-family":"Readex Pro, sans-serif"}},[e._v(e._s(e.producto.contenidoNeto))]),r("h4",{staticClass:"font-weight-bold precios--text",staticStyle:{"font-family":"Readex Pro, sans-serif"}},[e._v(e._s(e._f("moneda")(e.producto.costo)))])])],1)],1)],1)],1),e.mostrarAcciones?[e.estaBloqueado?[e.opcionBloquear?r("v-card-actions",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"grey"}},[r("v-btn",{attrs:{text:"",small:"",dark:""},on:{click:function(a){return e.$emit("desbloquear-producto")}}},[e._v("Desbloquear")])],1):r("v-card-actions",{staticClass:"font-weight-bold white--text",staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"grey"}},[e._v(" Producto Bloqueado ")])]:e.opcionBloquear?r("v-card-actions",{staticClass:"primary",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[r("v-btn",{attrs:{text:"",small:"",dark:""},on:{click:function(a){return e.$emit("bloquear-producto")}}},[e._v("Bloquear")])],1):e.productoAgregado?r("v-card-actions",{staticClass:"font-weight-bold white--text",staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"#8bc34a"}},[r("v-btn",{attrs:{text:"",small:"",dark:""}},[e._v("Producto Agregado")])],1):[r("v-card-actions",{staticClass:"primary",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[e.opcionAgregar?r("v-btn",{attrs:{text:"",small:"",dark:""},on:{click:function(a){return e.$emit("seleccionar")}}},[e._v("Agregar")]):e._e()],1)]]:e._e()],2)},o=[],n=(t("d3b7"),{name:"Producto",props:{opcionAgregar:{type:Boolean,default:!1},opcionBloquear:{type:Boolean,default:!1},producto:{type:Object,required:!0},productosBloqueadosAlumno:{type:Array,default:function(){return[]}},mostrarAcciones:{type:Boolean,default:!1},productoAgregado:{type:Boolean,default:!1},editarProducto:{type:Function}},data:function(){return{verDetalles:!1}},computed:{estaBloqueado:function(){var e=this.producto;return this.productosBloqueadosAlumno.some((function(a){return e.id===a.producto.id}))},imgSrc:function(){return this.$getImgCategoria(this.producto.categoria.id)}}}),i=n,s=(t("613a"),t("2877")),l=t("6544"),c=t.n(l),u=t("8336"),d=t("b0af"),m=t("99d9"),f=t("62ad"),p=t("132d"),g=t("adda"),v=t("0fd9"),b=Object(s["a"])(i,r,o,!1,null,"35d953f6",null);a["a"]=b.exports;c()(b,{VBtn:u["a"],VCard:d["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VCol:f["a"],VIcon:p["a"],VImg:g["a"],VRow:v["a"]})},"8e6b":function(e,a,t){"use strict";t("5246")},"8eab":function(e,a,t){"use strict";var r=t("20aa"),o=t("0dcc"),n=function(){var e=r["a"].BASE_URL+"/productos";return o["a"].get(e)},i=function(e){var a=r["a"].BASE_URL+"/productos/id-cliente/"+e;return o["a"].get(a)},s=function(e){var a=r["a"].BASE_URL+"/productos";return o["a"].post(a,e)},l=function(e){var a=r["a"].BASE_URL+"/productos";return o["a"].put(a,e)},c=function(e){var a=r["a"].BASE_URL+"/productos/bloqueos";return o["a"].post(a,e)},u=function(e){var a=r["a"].BASE_URL+"/productos/bloqueos/"+e;return o["a"].remove(a)};a["a"]={getProductos:n,getByCliente:i,create:s,update:l,bloquearProducto:c,desbloquearProducto:u}},c26f:function(e,a,t){"use strict";var r=t("20aa"),o=t("0dcc"),n=function(e){var a=r["a"].BASE_URL+"/ordenes/id-cliente-internet/"+e+"/hijos";return o["a"].get(a)},i=function(e){var a=r["a"].BASE_URL+"/ordenes/batch";return o["a"].post(a,e)},s=function(e){var a=r["a"].BASE_URL+"/ordenes/"+e+"/cancelar";return o["a"].patch(a)},l=function(e){var a=r["a"].BASE_URL+"/ordenes";return o["a"].put(a,e)},c=function(e,a){var t=r["a"].BASE_URL+"/ordenes/id-cliente-internet/"+e+"/hijos/estatus/"+a;return o["a"].get(t)},u=function(e){var a=r["a"].BASE_URL+"/ordenes/id-alumno/"+e;return o["a"].get(a)},d=function(e){var a=r["a"].BASE_URL+"/ordenes/matricula-alumno/"+e;return o["a"].get(a)},m=function(e,a){var t=r["a"].BASE_URL+"/ordenes/id-alumno/"+e+"/estatus/"+a;return o["a"].get(t)},f=function(e){if(e.esPadreDeFamilia)return n;if(e.esAlumno)return u;throw new Error("User type not found")},p=function(e){if(e.esPadreDeFamilia)return c;if(e.esAlumno)return m;throw new Error("User type not found")},g=function(e){var a=r["a"].BASE_URL+"/ordenes/"+e+"/entregar";return o["a"].patch(a)};a["a"]={getOrdenesPorCliente:n,createOrdenesBatch:i,updateOrdenes:l,cancelarOrden:s,getOrdenesPorClienteAndEstatus:c,getPorIdAlumno:u,getPorMatriculaAlumno:d,getPorIdAlumnoAndEstatus:m,getPromiseOrdenesById:f,getPromiseOrdenesByIdAndEstatus:p,entregarOrden:g}},dd26:function(e,a,t){"use strict";var r=t("20aa"),o=t("0dcc"),n=function(){var e=r["a"].BASE_URL+"/alumnos/cliente/1";return o["a"].get(e)},i=function(e){var a=r["a"].BASE_URL+"/alumnos";return o["a"].put(a,e)},s=function(e,a,t){var n=r["a"].BASE_URL+"/alumnos/nombre/"+e+"/apellido-paterno/"+a+"/apellido-materno/"+t;return o["a"].get(n)},l=function(e){var a=r["a"].BASE_URL+"/alumnos/matricula/"+e;return o["a"].get(a)},c=function(e){var a=r["a"].BASE_URL+"/clientes-internet/hijos/"+e;return o["a"].remove(a)};a["a"]={getAlumnos:n,updateAlumno:i,busquedaPorNombre:s,busquedaPorMatricula:l,desasignarAlumno:c}},e822:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("v-card",{staticClass:"text-center mx-0",staticStyle:{"border-radius":"10px"},attrs:{color:e.estaSeleccionada?"#2cafca":"",dark:e.estaSeleccionada,elevation:e.estaSeleccionada?"0":"",to:e.to?{name:e.to}:null},on:{click:function(a){return e.$emit("seleccionarCategoria")}}},[r("div",{staticClass:"py-2 flex-column text-center alineacion"},[r("v-img",{attrs:{height:"100px",width:"100px",src:e.imgSrc,"lazy-src":t("0745")}})],1),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("h2",[e._v(e._s(e.categoria.titulo))])])],1)],1)],1)},o=[],n={name:"Categoria",props:{categoria:{type:Object,required:!0},estaSeleccionada:{type:Boolean,required:!1},to:{type:String,default:null}},data:function(){return{imgSrc:this.$getImgCategoria(this.categoria.id)}}},i=n,s=(t("8e6b"),t("2877")),l=t("6544"),c=t.n(l),u=t("b0af"),d=t("99d9"),m=t("62ad"),f=t("adda"),p=t("0fd9"),g=Object(s["a"])(i,r,o,!1,null,"afc342f0",null);a["a"]=g.exports;c()(g,{VCard:u["a"],VCardText:d["c"],VCol:m["a"],VImg:f["a"],VRow:p["a"]})}}]);
//# sourceMappingURL=chunk-1915dffc.9f011bee.js.map