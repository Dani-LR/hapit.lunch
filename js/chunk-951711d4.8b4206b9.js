(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-951711d4"],{"0745":function(t,a,e){t.exports=e.p+"img/estado_vacio.2893b194.svg"},"19b8":function(t,a,e){},"2ab5":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("wrapper",{attrs:{titulo:"Productos"}},[r("select-cafeteria"),t.$cafeteriaSeleccionada&&t.$cafeteriaSeleccionada.id?[r("v-col",{staticClass:"text-end",attrs:{cols:"12"}},[r("v-btn",{attrs:{rounded:"",outlined:"",color:"success"}},[r("v-icon",[t._v("mdi-file-excel")]),t._v(" Subir productos desde excel ")],1)],1),t.productosFiltrados.length>0?r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-chip-group",{attrs:{"active-class":"deep-purple--text text--accent-4"},on:{change:t.filtrarProductos},model:{value:t.categoriaSeleccionada,callback:function(a){t.categoriaSeleccionada=a},expression:"categoriaSeleccionada"}},t._l(t.categorias,(function(a,e){return r("v-chip",{key:e,attrs:{value:a.id}},[t._v(" "+t._s(a.titulo)+" ")])})),1)],1),r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("v-text-field",{attrs:{solo:"",rounded:"",label:"Buscar productos","prepend-inner-icon":"mdi-store-search"},model:{value:t.productoParaBuscar,callback:function(a){t.productoParaBuscar=a},expression:"productoParaBuscar"}})],1),t._l(t.productosFiltrados,(function(a,e){return r("v-col",{key:e,staticClass:"my-2",attrs:{cols:"12",md:"4"}},[r("producto",{attrs:{producto:a,"editar-producto":function(){return t.abrirParaOperarProducto(a)}}})],1)}))],2):r("v-row",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{align:"center",justify:"center"}},[r("v-col",{staticClass:"text-center",staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{cols:"12"}},[r("img",{style:t.$vuetify.breakpoint.smAndDown?"width:100%":"width:50%",attrs:{src:e("7931")}})]),r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("h2",{staticClass:"text--disabled",staticStyle:{"font-family":"Nunito"}},[t._v("No hay productos en esta cafetería")])])],1)]:r("v-row",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{align:"center",justify:"center"}},[r("v-col",{staticClass:"text-center",staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{cols:"12"}},[r("img",{style:t.$vuetify.breakpoint.smAndDown?"width:100%":"width:50%",attrs:{src:e("7931")}})]),r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[r("h2",{staticClass:"text--disabled",staticStyle:{"font-family":"Nunito"}},[t._v("Aún no ha seleccionado cafetería")])])],1),r("dialogo",{attrs:{title:(t.productoParaOperar.id?"Editar":"Agregar")+" producto"},model:{value:t.dialogOperarProducto,callback:function(a){t.dialogOperarProducto=a},expression:"dialogOperarProducto"}},[r("v-form",{ref:"formProducto",attrs:{"lazy-validation":""}},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Nombre de producto",rules:t.textFieldRules,autofocus:""},model:{value:t.productoParaOperar.nombre,callback:function(a){t.$set(t.productoParaOperar,"nombre",a)},expression:"productoParaOperar.nombre"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Costo",type:"number",rules:t.textFieldRules,disabled:!!t.productoParaOperar.id},model:{value:t.productoParaOperar.costo,callback:function(a){t.$set(t.productoParaOperar,"costo",a)},expression:"productoParaOperar.costo"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Codigo de barras"},model:{value:t.productoParaOperar.codigoBarras,callback:function(a){t.$set(t.productoParaOperar,"codigoBarras",a)},expression:"productoParaOperar.codigoBarras"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Contenido neto",type:"number"},model:{value:t.productoParaOperar.contenidoNetoValor,callback:function(a){t.$set(t.productoParaOperar,"contenidoNetoValor",a)},expression:"productoParaOperar.contenidoNetoValor"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Contenido neto tipo"},model:{value:t.productoParaOperar.contenidoNetoTipo,callback:function(a){t.$set(t.productoParaOperar,"contenidoNetoTipo",a)},expression:"productoParaOperar.contenidoNetoTipo"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{label:"Seleccione categoria",items:t.categorias,"item-text":"titulo","return-object":"",rules:t.textFieldRules},model:{value:t.productoParaOperar.categoria,callback:function(a){t.$set(t.productoParaOperar,"categoria",a)},expression:"productoParaOperar.categoria"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{label:"Seleccione cafetería",items:t.cafeterias,"item-text":"nombre","return-object":"",rules:t.textFieldRules},model:{value:t.productoParaOperar.cafeteria,callback:function(a){t.$set(t.productoParaOperar,"cafeteria",a)},expression:"productoParaOperar.cafeteria"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Descripción"},model:{value:t.productoParaOperar.descripcion,callback:function(a){t.$set(t.productoParaOperar,"descripcion",a)},expression:"productoParaOperar.descripcion"}})],1),t.productoParaOperar.id?[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-checkbox",{attrs:{label:"Disponible"},model:{value:t.productoParaOperar.disponible,callback:function(a){t.$set(t.productoParaOperar,"disponible",a)},expression:"productoParaOperar.disponible"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-checkbox",{attrs:{label:"Activo"},model:{value:t.productoParaOperar.activo,callback:function(a){t.$set(t.productoParaOperar,"activo",a)},expression:"productoParaOperar.activo"}})],1)]:t._e()],2)],1),r("template",{slot:"actions"},[r("v-btn",{attrs:{text:"",color:"primary",plain:""},on:{click:t.guardarProducto}},[t._v("Guardar")])],1)],2),r("v-btn",{attrs:{fixed:"",color:"primary",bottom:"",right:"",fab:""},on:{click:function(a){return t.abrirParaOperarProducto({})}}},[r("v-icon",[t._v("mdi-plus")])],1)],2)},o=[],c=e("1da1"),i=(e("d3b7"),e("4de4"),e("caad"),e("2532"),e("96cf"),e("8b83")),s=e("8eab"),l=e("34a0"),n=e("e637"),d=e("ab31"),u={name:"ProductosCafeteria",components:{SelectCafeteria:d["a"],Producto:i["a"]},data:function(){return{productos:[],productosFiltrados:[],dialogOperarProducto:!1,productoParaOperar:{},categorias:[],categoriaSeleccionada:null,textFieldRules:[function(t){return!!t||"Este campo es requerido"}],cafeterias:[],dialogSeleccionarCafeteria:!1,productoParaBuscar:null}},created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$loader=!0,a.prev=1,a.next=4,s["a"].getProductos();case 4:t.productos=a.sent,t.filtrarProductos(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),t.productos=[];case 11:return a.prev=11,a.next=14,l["a"].getCategorias();case 14:t.categorias=a.sent,a.next=20;break;case 17:a.prev=17,a.t1=a["catch"](11),t.categorias=[];case 20:return a.prev=20,a.next=23,n["a"].getCafeterias(t.$usuario.idCliente);case 23:t.cafeterias=a.sent,a.next=29;break;case 26:a.prev=26,a.t2=a["catch"](20),t.cafeterias=[];case 29:t.$loader=!1;case 30:case"end":return a.stop()}}),a,null,[[1,8],[11,17],[20,26]])})))()},watch:{productoParaBuscar:function(t){(!t||t.length>=3)&&this.filtrarProductos()},$cafeteriaSeleccionada:function(t){t&&this.filtrarProductos()}},methods:{abrirParaOperarProducto:function(t){var a=this;this.productoParaOperar=t,this.dialogOperarProducto=!0,this.$nextTick((function(){return a.$refs.formProducto.resetValidation()}))},guardarProducto:function(){if(this.$refs.formProducto.validate()){var t=this;t.$loader=!0;var a=t.productoParaOperar.id?s["a"].update:s["a"].create;t.productoParaOperar.idCategoria=t.productoParaOperar.categoria.id,a(t.productoParaOperar).then((function(a){t.productoParaOperar.id||t.productos.push(a),t.categoriaSeleccionada=null,t.filtrarProductos(),t.$showAlerta("600","success","mdi-check-circle-outline","Producto guardado.",!0)})).catch((function(){t.$showAlerta("600","error","mdi-alert-circle","No fue posible guardar el producto.",!0),t.$router.go()})).finally((function(){t.dialogOperarProducto=!1,t.$loader=!1}))}},filtrarProductos:function(){var t=this;this.productosFiltrados=this.productos.filter((function(a){return(!t.categoriaSeleccionada||t.categoriaSeleccionada===a.categoria.id)&&(!t.productoParaBuscar||a.nombre.toLowerCase().includes(t.productoParaBuscar.toLowerCase()))&&a.idCafeteria===t.$cafeteriaSeleccionada.id}))},seleccionarCafeteria:function(t){this.cafeteriaSeleccionada=t.nombre,this.dialogSeleccionarCafeteria=!1}}},p=u,f=e("2877"),v=e("6544"),m=e.n(v),b=e("8336"),g=e("ac7c"),x=e("cc20"),P=e("ef9a"),y=e("62ad"),h=e("4bd4"),O=e("132d"),C=e("0fd9"),k=e("b974"),S=e("8654"),_=Object(f["a"])(p,r,o,!1,null,"685a03fa",null);a["default"]=_.exports;m()(_,{VBtn:b["a"],VCheckbox:g["a"],VChip:x["a"],VChipGroup:P["a"],VCol:y["a"],VForm:h["a"],VIcon:O["a"],VRow:C["a"],VSelect:k["a"],VTextField:S["a"]})},"613a":function(t,a,e){"use strict";e("19b8")},7931:function(t,a,e){t.exports=e.p+"img/productos_estado_vacio.96899fd0.svg"},"8b83":function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("v-card",{staticStyle:{"border-radius":"40px"},attrs:{color:"#eaf1f6",flat:"",disabled:t.estaBloqueado&&!t.opcionBloquear}},[t.editarProducto?r("v-card-title",{staticClass:"pa-2 text-center",staticStyle:{"background-color":"gray",display:"flex","margin-left":"85%","border-bottom-left-radius":"inherit"}},[r("v-btn",{attrs:{icon:"","x-small":"",dark:""},on:{click:function(a){return t.editarProducto()}}},[r("v-icon",[t._v("mdi-pencil")])],1)],1):t._e(),r("v-row",[r("v-col",{staticClass:"text-center flex-column pr-0",staticStyle:{display:"flex"},attrs:{cols:"4"}},[r("div",{staticClass:"py-2 flex-column text-center alineacion"},[r("v-img",{attrs:{height:"100px",width:"100px",src:t.imgSrc,"lazy-src":e("0745")}})],1)]),r("v-col",{staticClass:"pl-0 ml-0",attrs:{cols:"8"}},[r("v-card-text",{staticClass:"pa-0"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("h3",{staticClass:"black--text",staticStyle:{"font-family":"Nunito"}},[t._v(t._s(t.producto.nombre))]),r("h4",{staticClass:"text--disabled",staticStyle:{"font-family":"Readex Pro, sans-serif"}},[t._v(t._s(t.producto.descripcion))]),r("h4",{staticClass:"text--disabled",staticStyle:{"font-family":"Readex Pro, sans-serif"}},[t._v(t._s(t.producto.contenidoNeto))]),r("h4",{staticClass:"font-weight-bold precios--text",staticStyle:{"font-family":"Readex Pro, sans-serif"}},[t._v(t._s(t._f("moneda")(t.producto.costo)))])])],1)],1)],1)],1),t.mostrarAcciones?[t.estaBloqueado?[t.opcionBloquear?r("v-card-actions",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"grey"}},[r("v-btn",{attrs:{text:"",small:"",dark:""},on:{click:function(a){return t.$emit("desbloquear-producto")}}},[t._v("Desbloquear")])],1):r("v-card-actions",{staticClass:"font-weight-bold white--text",staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"grey"}},[t._v(" Producto Bloqueado ")])]:t.opcionBloquear?r("v-card-actions",{staticClass:"primary",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[r("v-btn",{attrs:{text:"",small:"",dark:""},on:{click:function(a){return t.$emit("bloquear-producto")}}},[t._v("Bloquear")])],1):t.productoAgregado?r("v-card-actions",{staticClass:"font-weight-bold white--text",staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"#8bc34a"}},[r("v-btn",{attrs:{text:"",small:"",dark:""}},[t._v("Producto Agregado")])],1):[r("v-card-actions",{staticClass:"primary",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[t.opcionAgregar?r("v-btn",{attrs:{text:"",small:"",dark:""},on:{click:function(a){return t.$emit("seleccionar")}}},[t._v("Agregar")]):t._e()],1)]]:t._e()],2)},o=[],c=(e("d3b7"),{name:"Producto",props:{opcionAgregar:{type:Boolean,default:!1},opcionBloquear:{type:Boolean,default:!1},producto:{type:Object,required:!0},productosBloqueadosAlumno:{type:Array,default:function(){return[]}},mostrarAcciones:{type:Boolean,default:!1},productoAgregado:{type:Boolean,default:!1},editarProducto:{type:Function}},data:function(){return{verDetalles:!1}},computed:{estaBloqueado:function(){var t=this.producto;return this.productosBloqueadosAlumno.some((function(a){return t.id===a.producto.id}))},imgSrc:function(){return this.$getImgCategoria(this.producto.categoria.id)}}}),i=c,s=(e("613a"),e("2877")),l=e("6544"),n=e.n(l),d=e("8336"),u=e("b0af"),p=e("99d9"),f=e("62ad"),v=e("132d"),m=e("adda"),b=e("0fd9"),g=Object(s["a"])(i,r,o,!1,null,"35d953f6",null);a["a"]=g.exports;n()(g,{VBtn:d["a"],VCard:u["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:f["a"],VIcon:v["a"],VImg:m["a"],VRow:b["a"]})}}]);
//# sourceMappingURL=chunk-951711d4.8b4206b9.js.map