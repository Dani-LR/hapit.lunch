(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42ff5156"],{"08dc":function(e,t,a){e.exports=a.p+"img/dinero.207c07ef.png"},"148e":function(e,t,a){e.exports=a.p+"img/menu_estado_vacio.f6ff0435.svg"},"3bf4":function(e,t,a){"use strict";a("5d3d")},5092:function(e,t,a){"use strict";var n=a("20aa"),o=a("0dcc"),r=function(e){var t=n["a"].BASE_URL+"/menus/id-cliente/"+e;return o["a"].get(t)},i=function(){var e=n["a"].BASE_URL+"/menus/disponibles";return o["a"].get(e)},c=function(){var e=n["a"].BASE_URL+"/menus/semanales";return o["a"].get(e)},s=function(e){var t=n["a"].BASE_URL+"/menus";return o["a"].post(t,e)},l=function(e){var t=n["a"].BASE_URL+"/menus";return o["a"].put(t,e)};t["a"]={getByCliente:r,getMenusDisponibles:i,getMenusSemanales:c,crearMenu:s,updateMenu:l}},"5d3d":function(e,t,a){},"901c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$vuetify.breakpoint.smAndDown?n("v-bottom-navigation",{staticStyle:{"font-family":"Nunito"},attrs:{grow:"",fixed:"",app:"",color:"primary","background-color":"blue lighten-5"}},[e.alumno?n("v-btn",{on:{click:function(t){e.dialogSeleccionarAlumno=!0}}},[n("span",[e._v(" "+e._s(e.alumno.nombre)+" ")]),n("img",{attrs:{src:e.alumno.refImagen,width:"30"}})]):e._e(),n("select-fecha",{attrs:{value:e.fecha},on:{input:function(t){return e.$emit("cambiar-fecha",t)}}}),n("v-btn",[n("span",[e._v(" "+e._s(e._f("moneda")(e.saldo))+" ")]),n("img",{attrs:{src:a("08dc"),width:"30"}})])],1):n("v-card",{staticClass:"text-center",staticStyle:{"font-family":"Nunito"},attrs:{color:"blue lighten-5",flat:"",rounded:""}},[n("v-card-text",[n("v-row",[e.alumno?n("v-col",{attrs:{cols:"4"},on:{click:function(t){e.dialogSeleccionarAlumno=!0}}},[n("item-opcion",{attrs:{texto:e.alumno.nombre,imagen:e.alumno.refImagen,descripcion:"Alumno"}})],1):e._e(),n("v-col",{attrs:{cols:"4"}},[n("select-fecha",{attrs:{value:e.fecha},on:{input:function(t){return e.$emit("cambiar-fecha",t)}}})],1),n("v-col",{attrs:{cols:"4"}},[n("item-opcion",{attrs:{texto:e._f("moneda")(e.saldo),imagen:a("08dc"),descripcion:"Saldo disponible"}})],1)],1)],1)],1),n("dialogo",{attrs:{title:""},model:{value:e.dialogSeleccionarAlumno,callback:function(t){e.dialogSeleccionarAlumno=t},expression:"dialogSeleccionarAlumno"}},[n("v-card",{staticClass:"text-center",staticStyle:{"font-family":"Nunito"},attrs:{flat:""}},[n("v-card-title",{staticStyle:{display:"grid","text-align":"center"}},[n("h4",{staticClass:"text--disabled"},[e._v("Seleccione un alumno")])]),n("v-card-text",e._l(e.$usuario.hijos,(function(t,a){return n("div",{key:a,on:{click:function(a){return e.seleccionarHijo(t)}}},[n("item-opcion",{attrs:{texto:t.alumno.nombreCompleto,imagen:t.alumno.refImagen}})],1)})),0)],1)],1)],1)},o=[],r=(a("a9e3"),a("137f")),i=a("e3fc"),c={name:"PanelOpciones",props:{alumno:{type:Object,required:!1},fecha:{type:String,required:!1},saldo:{type:Number,required:!0}},components:{SelectFecha:i["a"],ItemOpcion:r["a"]},data:function(){return{dialogSeleccionarAlumno:!1}},methods:{seleccionarHijo:function(e){this.$emit("seleccionar-hijo",e),this.dialogSeleccionarAlumno=!1}}},s=c,l=a("2877"),u=a("6544"),d=a.n(u),f=a("b81c"),m=a("8336"),h=a("b0af"),p=a("99d9"),v=a("62ad"),g=a("0fd9"),b=Object(l["a"])(s,n,o,!1,null,"7023b634",null);t["a"]=b.exports;d()(b,{VBottomNavigation:f["a"],VBtn:m["a"],VCard:h["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:v["a"],VRow:g["a"]})},"95f3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("wrapper",{attrs:{titulo:"Menús"}},[e.$usuario.hijos&&e.$usuario.hijos.length>0?n("v-row",[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("panel-opciones",{attrs:{alumno:e.hijoSeleccionado.alumno,fecha:e.fecha,saldo:e.saldoCafeteriaAlumnoSeleccionado},on:{"cambiar-fecha":function(t){e.fecha=t},"seleccionar-hijo":e.seleccionarHijo}})],1),n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e.hijoSeleccionado?n("h2",{staticClass:"text--disabled"},[e._v(e._s(e.hijoSeleccionado.alumno.cafeteria.nombre))]):e._e()]),e.menusFiltrados.length>0?n("v-col",{attrs:{cols:"12"}},[n("v-fade-transition",{attrs:{mode:"out-in","hide-on-leave":""}},[n("carrusel",{key:e.hijoSeleccionado.id,attrs:{"per-page-escritorio":"2"}},e._l(e.menusFiltrados,(function(t,a){return n("carrusel-item",{key:a},[n("tarjeta-menu",{attrs:{menu:t,"opcion-agregar":!e.estaMenuEnCarrito(t.id),cargando:e.hijoSeleccionado.cargandoSaldo,"mostrar-acciones":""},on:{seleccionar:function(a){return e.seleccionarProducto(e.hijoSeleccionado.alumno,e.fecha,t)}}})],1)})),1)],1)],1):n("v-col",{attrs:{cols:"12"}},[n("v-row",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"text-center",staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{cols:"12"}},[n("img",{style:e.$vuetify.breakpoint.smAndDown?"width:100%":"width:50%",attrs:{src:a("148e")}})]),n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("h2",{staticClass:"text--disabled",staticStyle:{"font-family":"Nunito"}},[e._v("No hay menús disponibles para este día")])])],1)],1)],1):n("v-row",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"text-center",staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{cols:"12"}},[n("img",{style:e.$vuetify.breakpoint.smAndDown?"width:100%":"width:50%",attrs:{src:a("148e")}})]),n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("h2",{staticClass:"text--disabled",staticStyle:{"font-family":"Nunito"}},[e._v("No tiene alumnos agregados")])]),n("v-col",{staticClass:"text-center",attrs:{cols:"12",md:"6"}},[n("v-btn",{attrs:{rounded:"",to:{name:"Alumnos"}}},[n("span",{staticClass:"primary--text",staticStyle:{"font-family":"Nunito"}},[e._v("Ir a alumnos")])])],1)],1),n("v-snackbar",{attrs:{color:"success",bottom:"",app:""},model:{value:e.mensajeProductoAgregado,callback:function(t){e.mensajeProductoAgregado=t},expression:"mensajeProductoAgregado"}},[e._v("Producto agregado")])],1)},o=[],r=a("5530"),i=a("b85c"),c=a("1da1"),s=(a("96cf"),a("d3b7"),a("4de4"),a("c740"),a("e9c4"),a("b078")),l=a("5092"),u=a("4bdc"),d=a("cc46"),f=a("f28e"),m=a("20aa"),h=a("9d42"),p=a("e637"),v=a("6f35"),g=a("c26f"),b=a("901c"),S={name:"DashboardMenu",components:{PanelOpciones:b["a"],CarruselItem:d["a"],Carrusel:u["a"],TarjetaMenu:s["a"]},data:function(){return{calendario:!1,fecha:null,dialogSeleccionarAlumno:!1,menus:[],ordenes:[],hijoSeleccionado:{},mensajeProductoAgregado:!1,menusFiltrados:[]}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.hijoSeleccionado=e.$usuario.hijos.length?e.$usuario.hijos[0]:{},e.$loader=!0,t.prev=2,t.next=5,l["a"].getMenusSemanales();case 5:e.menus=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),e.menus=[];case 11:return t.prev=11,t.next=14,g["a"].getOrdenesPorCliente(e.$usuario.id);case 14:e.ordenes=t.sent,t.next=20;break;case 17:t.prev=17,t.t1=t["catch"](11),console.log(t.t1);case 20:e.fecha=h["a"].getFechaString(),e.$loader=!1,a=e,n=Object(i["a"])(e.$usuario.hijos);try{for(r=function(){var e=o.value;a.$set(e,"cargandoSaldo",!0),p["a"].getSaldoPorCafeteria(a.$usuario.idCliente,e.alumno.id).then((function(t){a.$set(e.alumno.cafeteria,"saldoAlumno",a.$getSaldoDeAlumnoParaCafeteria(e.alumno.cafeteria.id,t))})).catch((function(){})).finally((function(){return a.$set(e,"cargandoSaldo",!1)}))},n.s();!(o=n.n()).done;)r()}catch(c){n.e(c)}finally{n.f()}case 25:case"end":return t.stop()}}),t,null,[[2,8],[11,17]])})))()},watch:{fecha:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$loader=!0;try{t.filtrarMenu(e)}catch(n){console.log(n)}t.$loader=!1;case 3:case"end":return a.stop()}}),a)})))()}},computed:{saldoCafeteriaAlumnoSeleccionado:function(){return this.hijoSeleccionado.alumno.cafeteria.saldoAlumno-v["a"].getCostoTotalOrdenes(this.hijoSeleccionado.alumno,this.ordenes.filter((function(e){return"CREADA"===e.estatus.titulo})))-v["a"].getCostoTotalOrdenes(this.hijoSeleccionado.alumno,this.$ordenesNuevas)}},methods:{seleccionarProducto:function(e,t,a){var n=this;if(A(this,a,e,t))this.$showAlerta("600","warning","mdi-alert-circle","Sólo se puede agregar un menú por día",!1);else{var o,c=Object(i["a"])(a.detalles);try{var s=function(){var i=o.value;v["a"].esSaldoSuficiente(n.$ordenesNuevas,e,i.producto,i.cantidad)?e.productosBloqueados.some((function(e){return i.producto.id===e.producto.id}))?n.$showAlerta("600","warning","mdi-alert-circle","El producto "+i.producto.nombre+" no se ha agregado a la orden porque se encuentra bloqueado para "+e.nombre,!1):y(n,e,t,Object(r["a"])(Object(r["a"])({},i),{},{menu:a})):n.$showAlerta("600","warning","mdi-alert-circle","El alumno no cuenta con saldo suficiente",!1)};for(c.s();!(o=c.n()).done;)s()}catch(l){c.e(l)}finally{c.f()}}},seleccionarHijo:function(e){this.hijoSeleccionado=e,this.filtrarMenu(this.fecha)},filtrarMenu:function(e){if(e&&this.hijoSeleccionado.id){var t=this;this.menusFiltrados=t.menus.filter((function(a){return(a.esSemanal||e===a.fecha)&&(!t.hijoSeleccionado.alumno.cafeteria||t.hijoSeleccionado.alumno.cafeteria.id===a.cafeteria.id)&&t.hijoSeleccionado.alumno.seccion.id===a.seccionEscolar.id}))}else this.menusFiltrados=[]},estaMenuEnCarrito:function(e){var t=this;return this.$ordenesNuevas.some((function(a){return t.fecha===a.fecha&&t.hijoSeleccionado.alumno.id===a.alumno.id&&a.productos.some((function(t){return t.menu&&e===t.menu.id}))}))}}};function y(e,t,a,n){var o=e.$ordenesNuevas.findIndex((function(e){return e.idAlumno===t.id&&e.fecha===a}));o<0&&(o=e.$ordenesNuevas.push(new f["a"]({alumno:t,fecha:a,cafeteria:t.cafeteria,clienteInternet:e.$usuario}))-1);var r=e.$ordenesNuevas[o];r.productos.push({id:0,cantidad:n.cantidad,costo:n.cantidad*n.producto.costo,menu:n.menu,producto:n.producto}),e.$set(r,"costo",r.productos.reduce((function(e,t){return e+t.costo}),0)),e.mensajeProductoAgregado=!0,localStorage.setItem(m["a"].CARRITO_KEY,JSON.stringify(e.$ordenesNuevas))}function A(e,t,a,n){return e.$ordenesNuevas.some((function(e){return n===e.fecha&&a.id===e.alumno.id&&e.productos.some((function(e){return!!e.menu}))}))}var j=S,C=a("2877"),_=a("6544"),x=a.n(_),w=a("8336"),$=a("62ad"),B=a("0789"),O=a("0fd9"),k=a("2db4"),E=Object(C["a"])(j,n,o,!1,null,"9a006410",null);t["default"]=E.exports;x()(E,{VBtn:w["a"],VCol:$["a"],VFadeTransition:B["c"],VRow:O["a"],VSnackbar:k["a"]})},b078:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticStyle:{"border-radius":"40px","font-family":"Nunito"},attrs:{color:"#ededed",flat:"",to:e.redireccionar?{name:"DashboardMenu"}:""}},[a("v-card-title",{staticStyle:{"background-color":"#BBDEFB","word-break":"normal!important"}},[e._v(" "+e._s(e.menu.nombre)+" "),a("v-spacer"),a("span",{staticClass:"caption"},[e._v(e._s(e._f("moneda")(e.menu.costo)))])],1),a("v-card-text",{staticClass:"text-left pt-4",staticStyle:{"background-color":"#E3F2FD",height:"100px","overflow-y":"scroll"}},[a("v-row",e._l(e.menu.detalles,(function(t,n){return a("v-col",{key:n,staticClass:"py-0",attrs:{cols:"12"}},[a("small",[e._v(e._s(t.cantidad)+" pza"),t.cantidad>1?a("span",[e._v("s ")]):e._e(),e._v(" "+e._s(t.producto.nombre)+" ")])])})),1)],1),e.mostrarAcciones?[e.opcionAgregar?a("v-card-actions",{staticClass:"text-center",staticStyle:{display:"grid","background-color":"#2196f3"}},[a("v-btn",{attrs:{text:"",dark:""},on:{click:function(t){return e.$emit("seleccionar")}}},[e._v("Agregar")])],1):a("v-card-actions",{staticClass:"text-center",staticStyle:{display:"grid","background-color":"#8bc34a"}},[a("v-btn",{attrs:{text:"",dark:""}},[e._v("Agregado")])],1),e.opcionQuitar?a("v-card-actions",{staticClass:"text-center",staticStyle:{display:"grid","background-color":"#2196f3"}},[a("v-btn",{attrs:{text:"",dark:""}},[e._v("Quitar")])],1):e._e()]:e._e()],2)},o=[],r={name:"TarjetaMenu",props:{opcionAgregar:{type:Boolean,default:!1},opcionQuitar:{type:Boolean,default:!1},agregado:{type:Boolean,default:!1},menu:{type:Object,required:!0},cargando:{type:Boolean,default:!1},mostrarAcciones:{type:Boolean,default:!1},redireccionar:{type:Boolean,required:!1}},data:function(){return{verDetalles:!1}}},i=r,c=(a("3bf4"),a("2877")),s=a("6544"),l=a.n(s),u=a("8336"),d=a("b0af"),f=a("99d9"),m=a("62ad"),h=a("0fd9"),p=a("2fa4"),v=Object(c["a"])(i,n,o,!1,null,"4d0d342e",null);t["a"]=v.exports;l()(v,{VBtn:u["a"],VCard:d["a"],VCardActions:f["a"],VCardText:f["c"],VCardTitle:f["d"],VCol:m["a"],VRow:h["a"],VSpacer:p["a"]})},b81c:function(e,t,a){"use strict";var n=a("5530"),o=(a("a9e3"),a("c7cd"),a("dd43"),a("3a66")),r=a("604c"),i=r["a"].extend({name:"button-group",provide:function(){return{btnToggle:this}},computed:{classes:function(){return r["a"].options.computed.classes.call(this)}},methods:{genData:r["a"].options.methods.genData}}),c=a("a9ad"),s=a("24b2"),l=a("a452"),u=a("277e"),d=a("7560"),f=a("f2e7"),m=a("58df"),h=a("d9bd");t["a"]=Object(m["a"])(Object(o["a"])("bottom",["height","inputValue"]),c["a"],s["a"],Object(f["b"])("inputValue"),l["a"],u["a"],d["a"]).extend({name:"v-bottom-navigation",props:{activeClass:{type:String,default:"v-btn--active"},backgroundColor:String,grow:Boolean,height:{type:[Number,String],default:56},hideOnScroll:Boolean,horizontal:Boolean,inputValue:{type:Boolean,default:!0},mandatory:Boolean,shift:Boolean,tag:{type:String,default:"div"}},data:function(){return{isActive:this.inputValue}},computed:{canScroll:function(){return u["a"].options.computed.canScroll.call(this)&&(this.hideOnScroll||!this.inputValue)},classes:function(){return{"v-bottom-navigation--absolute":this.absolute,"v-bottom-navigation--grow":this.grow,"v-bottom-navigation--fixed":!this.absolute&&(this.app||this.fixed),"v-bottom-navigation--horizontal":this.horizontal,"v-bottom-navigation--shift":this.shift}},styles:function(){return Object(n["a"])(Object(n["a"])({},this.measurableStyles),{},{transform:this.isActive?"none":"translateY(100%)"})}},created:function(){this.$attrs.hasOwnProperty("active")&&Object(h["a"])("active.sync","value or v-model",this)},methods:{thresholdMet:function(){this.isActive=!this.isScrollingUp,this.$emit("update:input-value",this.isActive)},updateApplication:function(){return this.$el?this.$el.clientHeight:0},updateValue:function(e){this.$emit("change",e)}},render:function(e){var t=this.setBackgroundColor(this.backgroundColor,{staticClass:"v-bottom-navigation",class:this.classes,style:this.styles,props:{activeClass:this.activeClass,mandatory:Boolean(this.mandatory||void 0!==this.value),tag:this.tag,value:this.internalValue},on:{change:this.updateValue}});return this.canScroll&&(t.directives=t.directives||[],t.directives.push({arg:this.scrollTarget,name:"scroll",value:this.onScroll})),e(i,this.setTextColor(this.color,t),this.$slots.default)}})},c26f:function(e,t,a){"use strict";var n=a("20aa"),o=a("0dcc"),r=function(e){var t=n["a"].BASE_URL+"/ordenes/id-cliente-internet/"+e+"/hijos";return o["a"].get(t)},i=function(e){var t=n["a"].BASE_URL+"/ordenes/batch";return o["a"].post(t,e)},c=function(e){var t=n["a"].BASE_URL+"/ordenes/"+e+"/cancelar";return o["a"].patch(t)},s=function(e){var t=n["a"].BASE_URL+"/ordenes";return o["a"].put(t,e)},l=function(e,t){var a=n["a"].BASE_URL+"/ordenes/id-cliente-internet/"+e+"/hijos/estatus/"+t;return o["a"].get(a)},u=function(e){var t=n["a"].BASE_URL+"/ordenes/id-alumno/"+e;return o["a"].get(t)},d=function(e){var t=n["a"].BASE_URL+"/ordenes/matricula-alumno/"+e;return o["a"].get(t)},f=function(e,t){var a=n["a"].BASE_URL+"/ordenes/id-alumno/"+e+"/estatus/"+t;return o["a"].get(a)},m=function(e){if(e.esPadreDeFamilia)return r;if(e.esAlumno)return u;throw new Error("User type not found")},h=function(e){if(e.esPadreDeFamilia)return l;if(e.esAlumno)return f;throw new Error("User type not found")},p=function(e){var t=n["a"].BASE_URL+"/ordenes/"+e+"/entregar";return o["a"].patch(t)};t["a"]={getOrdenesPorCliente:r,createOrdenesBatch:i,updateOrdenes:s,cancelarOrden:c,getOrdenesPorClienteAndEstatus:l,getPorIdAlumno:u,getPorMatriculaAlumno:d,getPorIdAlumnoAndEstatus:f,getPromiseOrdenesById:m,getPromiseOrdenesByIdAndEstatus:h,entregarOrden:p}},dd43:function(e,t,a){},f28e:function(e,t,a){"use strict";var n=a("d4ec"),o=function e(t){var a=t.id,o=void 0===a?0:a,r=t.alumno,i=t.fecha,c=t.ciclo,s=void 0===c?null:c,l=t.productos,u=void 0===l?[]:l,d=t.cafeteria,f=t.clienteInternet,m=t.menu;Object(n["a"])(this,e),this.id=o,this.alumno=r||null,this.idAlumno=r?r.id:null,this.fecha=i,this.ciclo=s,this.costo=0,this.estaEntregada=!1,this.productos=u,this.cafeteria=d||null,this.idCafeteria=d?d.id:null,this.clienteInternet=f||null,this.idClienteInternet=f?f.id:null,this.menu=m||null,this.idMenu=m?m.id:null};t["a"]=o}}]);
//# sourceMappingURL=chunk-42ff5156.acbe1351.js.map